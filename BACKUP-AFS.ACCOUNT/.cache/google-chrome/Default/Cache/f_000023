!function($){var HymnalLib={version:3};"undefined"==typeof window.Hymnal&&(window.Hymnal=HymnalLib),function(t){t.defaultSettings=t.defaultSettings||{adminHost:"http://hymnal.voxmedia.com",userCanViewMetrics:!1},t.settings=t.settings?$.extend(_.clone(t.defaultSettings),t.settings):t.defaultSettings,t.settings=t.settings||{adminHost:"http://hymnal.voxmedia.com",userCanViewMetrics:!1},window.console=window.console||{log:function(){}},t.loggers=t.loggers||{push:function(){}},t.ConsoleLogger=t.ConsoleLogger||function(){},t.ads=t.ads||[],!t.settings.userCanViewMetrics&&$("#network-bar a[title='Network Admin Dashboard']").length>0&&(t.settings.userCanViewMetrics=!0),t.ChorusEvents=t.ChorusEvents||{AdResponseWithHTML:"Vox.Ad.ResponseWithHTML",AdRequest:"Hymnal.requestAd"}}(HymnalLib),function(t){function e(t,e,n){t.style.position=n,t.style.top=e.offsetTop+"px",t.style.left=e.offsetLeft+"px",t.style["min-height"]=e.offsetHeight+"px",t.style.width=e.offsetWidth+"px",t.style["z-index"]=9999}function n(t){t.style.top=null,t.style.left=null,t.style.height=null,t.style.width=null}function i(t){t.style.height="auto"}t.util={},t.util.UserAgentProfiler=function(){var t="ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch||navigator.msMaxTouchPoints>0,e=window.innerWidth,n=window.navigator.userAgent,i=t&&728>e||window.location.href.indexOf("mobile=true")>0,a=t&&e>=728,s=!i&&!a,o=i?"mobile":a?"tablet":"desktop",l=!1;if(n.indexOf("Android")>0)for(var r=n.split(";"),d=0,c=r.length;c>d;d++)if(r[d].indexOf("Android")>0){var p=r[d].split(" ");if(parseInt(p[p.length-1].split(".")[0])<3){l=!0;break}}return{screenWidth:function(){return e},profile:function(){return o},isTablet:function(){return a},isMobile:function(){return i},isDesktop:function(){return s},isAndroidLt3:function(){return l},deviceTypeForOpenX:function(){return this.profile()},browserWidthForOpenX:function(){return Chorus.Environment.currentBreakpoint().name}}}(),t.util.inViewport=function(t){var e,n;return t?(t.jquery&&(t=t.get(0)),t&&1===t.nodeType?(n=document.documentElement,e=t.getBoundingClientRect(),!!e&&e.bottom>0&&e.right>0&&e.top<n.clientHeight&&e.left<n.clientWidth):!1):!1};var a=t.util.flip=function(a,s,o,l,r){function d(){e(p,a,c),p.classList.remove("flipped"),p.classList.remove("flipped"),a.classList.remove("flipped"),window.setTimeout(function(){p.classList.remove(l),document.body.removeChild(p)},r)}t.util.flip.called||($("head").append($('<style id="hymnal-flippant-styles">').text(t.util.flip.css)),t.util.flip.called=!0);var c,p,h;return r=r||400,o=o||"card","modal"===o&&(l=l||"flippant-modal-dark",c="fixed",h=n),"card"===o&&(l=l||"flippant-modal-light",c="absolute",h=i),p=document.createElement("div"),document.body.appendChild(p),e(p,a,c),p.innerHTML=s,a.classList.add("flippant"),p.classList.add("flippant-back"),p.classList.add(l),"absolute"==c?h(p):window.setTimeout(function(){h(p)},0),window.setTimeout(function(){p.classList.add("flipper"),p.classList.add("flipped"),a.classList.add("flipped")},0),p.addEventListener("close",d),p.close=d,p};a.css=".flippant{transform:perspective(500px) rotateY(0);-webkit-transform:perspective(500px) rotateY(0);-moz-transform:perspective(500px) rotateY(0)}.flippant-back{transform:perspective(500px) rotateY(-180deg);-moz-transform:perspective(500px) rotateY(-180deg);-webkit-transform:perspective(500px) rotateY(-180deg);height:0}.flippant,.flippant-back{transform-style:preserve-3d;-webkit-transform-style:preserve-3d;-moz-transform-style:preserve-3d;backface-visibility:hidden;-webkit-backface-visibility:hidden;-moz-backface-visibility:hidden}.flippant,.flipper{-o-transition:all .2s ease-in-out;-ms-transition:all .2s ease-in-out;-moz-transition:all .2s ease-in-out;-webkit-transition:all .2s ease-in-out;transition:all .2s ease-in-out}.flippant.flipped{transform:perspective(500px) rotateY(180deg);-moz-transform:perspective(500px) rotateY(180deg);-webkit-transform:perspective(500px) rotateY(180deg)}.flippant-back.flipped{transform:perspective(500px) rotateY(0);-moz-transform:perspective(500px) rotateY(0);-webkit-transform:perspective(500px) rotateY(0)}.flippant-modal-dark,.flippant-modal-light{position:fixed;margin:0;top:2.5%;left:2.5%;width:95%;height:95%;padding:1em;box-sizing:border-box;background:rgba(0,0,0,0.7);box-shadow:0 0 10px rgba(0,0,0,0.5)}.flippant-modal-dark,.flippant-modal-dark p{color:white}.flippant-modal-light{background:rgba(230,230,230,0.7);box-shadow:2px 2px 6px rgba(0,0,0,0.3);border-radius:5px;border:1px solid #aaa}",a.called=!1}(HymnalLib),function(t){t.Ad=function(){function e(e){e=e||{},this.type=e.type,this.id=e.id,this.design_template=e.design_template||"",this.brand=e.brand,this.campaignId=e.campaignId,this.slug=e.slug,this.fields=e.fields||{},this.adUnitID=0,this.siteID="",this.network="",this.entryType="",this.adServerVariables={},this.libraryVersion=t.version,this.enable_log=!1,this.data=this.data||{},this._elementToReplace=e.elementToReplace&&$(e.elementToReplace),this._designSetupFunction=e.designSetupFunction,this._element=e.element,this.manual_view_impression=!1,this.manual_chartbeat_setup=!1,this.manual_moat_setup=!1,this.automatic_click_through=!0,this.content={all_html:e.html,all_css:e.css},this.clickThroughUrl=e.clickThroughUrl,this.settings={testMode:_.isBoolean(e.testMode)?e.testMode:!1,window:e.testWindow||window},this._lifecycleEventListeners=[],this._engagementEventListeners=[],this._metricsInstrumentations=[],this._loggers=[],window.Hymnal&&window.Hymnal.ads&&window.Hymnal.ads.push(this),this._baseballCard=null}return e.cssClasses={viewed:"hymnal-ad-viewed"},e.prototype.getInfo=function(){return"==============================\nAd type:       "+(this.type||"(unknown)")+"\nAd id:         "+(this.id||"(unknown)")+"\nBrand:         "+(this.brand||"(unknown)")+"\nSlug:          "+this.getSlug()+"\nAd Unit ID:    "+this.adUnitID+"\nSite ID:       "+this.siteID+"\nNetwork:       "+this.network+"\nEntry Type:    "+this.entryType+"\nClick Through: "+this.clickThroughUrl+"\n-----\nHymnal SDK version: 0.2\n==============================\n"},e.prototype.addEngagementEventListener=function(t){this._engagementEventListeners.push(t)},e.prototype.addLifecycleEventListener=function(t){this._lifecycleEventListeners.push(t)},e.prototype.addMetricsInstrumentation=function(t){this.log("Adding metrics instrumentation: "+(t.getName()||"(no name)")),this._metricsInstrumentations.push(t),t.setAd(this)},e.prototype.addLogger=function(){this.enable_log=!0,ad.log("Call to deprecated function. Use 'ad.enable_log = true' to log to console.log (if it exists)")},window.console=window.console||{log:function(){}},e.prototype.log=function(t){for(var e="",n=1;n<arguments.length;n++)e+=" "+argument[n];this.enable_log&&window.console.log("HYMNAL | "+this.getSlug()+" | ",t,e)},e.prototype.render=function(){if(this._triggerLifecycleEvent("initializing"),this._elementToReplace||(this._elementToReplace=this.findElement()),this._elementToReplace){var e=_.isString(this._elementToReplace)?$(this._elementToReplace).first():this._elementToReplace;this.getConfigurationFromDataAttributes(e),this.selectVariant(this.variantID),this.addClassesToHtmlElement(),this.replaceAdServerVariablesInDesignHtml();var n=$(this.content.html);if(e.replaceWith(n),this._element=n,this.content.css&&$('<style type="text/css" data-for-hymnal-ad="'+this.getSlug()+'">'+this.content.css+"</style>").insertAfter($("head").children().last()),this._designSetupFunction&&this._designSetupFunction(this.variantID),this.automatic_click_through){var i=this;$(this._element).find("#athena-click, .athena-click, #fishtank-click, .fishtank-click").click(function(t){i.clickThrough(),t.stopPropagation(),t.preventDefault()})}}t.settings.userCanViewMetrics&&this._showBaseballCardButton(),this._triggerLifecycleEvent("render"),this._configureStandardEngagementDetection()},e.prototype.getConfigurationFromDataAttributes=function(t){var e=t.attr("data-hymnal-ad-config-click-through-url");e&&""!==$.trim(e)?(this.clickThroughUrl&&this.log("Overriding previous click-through URL: "+this.clickThroughUrl+"..."),this.clickThroughUrl=e,this.log("Using click-through URL from data-hymnal-ad-config-click-through-url: "+e)):this.log("No click-through URL found on data-hymnal-ad-config-click-through-url"),this.adUnitID=t.attr("data-hymnal-ad-unit-id"),this.siteID=t.attr("data-hymnal-site-id"),this.variantID=t.attr("data-hymnal-design-variant-id"),"undefined"==typeof this.variantID&&(this.variantID=Object.keys(this.fields)[0]),this.network=t.attr("data-hymnal-network"),this.entryType=t.attr("data-hymnal-entry-type"),this.getTestMode()&&this.synthesizeAdServerVariables(),this.adServerVariables.click_through_url=this.clickThroughUrl,this.adServerVariables.ad_unit_id=this.adUnitID,this.adServerVariables.site_id=this.siteID,this.adServerVariables.network=this.network,this.adServerVariables.entry_type=this.entryType},e.prototype.selectVariant=function(t){var e=(this.content.all_html[t]||"").trim(),n=(this.content.all_css[t]||"").trim();this.content.html=e.replace(/\\"/g,'"').replace(/\\'/g,"'").replace(/\\\//g,"/"),this.content.css=n.replace(/\\"/g,'"').replace(/\\'/g,"'").replace(/\\\//g,"/"),this.fields=this.fields[t]},e.prototype.synthesizeAdServerVariables=function(){var t=["verge","polygon","eater","racked","vox","curbed"];if("undefined"==typeof this.network){for(var e=!1,n=0;n<t.length&&!e;n++)location.host.indexOf(t[n])>-1&&(this.network=t[n],e=!0);e||(this.network="sbn")}this.entryType=""},e.prototype.replaceAdServerVariablesInDesignHtml=function(){for(var t in this.adServerVariables){var e=new RegExp("\\$AD_SERVER\\["+t+"\\]","g");this.content.html=this.content.html.replace(e,this.adServerVariables[t])}},e.prototype.addClassesToHtmlElement=function(){for(var t="",e=["harmony-","hymnal-"],n=[this.network,this.entryType],i=0;i<n.length;i++)if("undefined"!=typeof n[i]&&n[i].length>0)for(var a=0;a<e.length;a++)t+=e[a]+n[i]+" ";this.log("adding classes to html "+t),$("html").addClass(t)},e.prototype.popUp=function(t){var e=this.getElement();if(e){var n=e.find(".hymnal-popup-message-container");0===n.length&&(n=$("<div>").addClass("hymnal-popup-message-container").css({position:"absolute",top:"0",left:"0","z-index":"1000"}).appendTo(e));var i=$("<span>").addClass("hymnal-popup-message").css({display:"none","border-radius":"5px","background-color":"white",color:"#333","float":"left",margin:"8px","margin-bottom":"0px",padding:"3px",clear:"both","user-select":"none",opacity:"0.75"}).text(t);n.append(i),i.fadeIn(),_.delay(function(){i.slideUp(500,function(){i.remove()})},4e3),_.delay(function(){0===n.find(".hymnal-popup-message").length&&n.remove()},5e3)}else window.console&&console.log&&console.log("Ad["+this.getSlug()+"] - "+t+" (pop up message not available)")},e.prototype.findElement=function(){var t=$('[data-hymnal-ad-slug="'+this.getSlug()+'"]');if(t.length>0?this.log("Element to replace found by data-hymnal-ad-slug: "+this.getSlug()):t=$('[data-hymnal-ad-id="'+this.id+'"]'),t.length>0)this.log("Element to replace found by data-hymnal-ad-id: "+this.id);else if(_.isString(this.type)){var e=this.type.toLowerCase();t=$('[data-hymnal-ad-type="'+e+'"]'),t.length>0?this.log("Element to replace found by data-hymnal-ad-type: "+e):(t=$('[data-hymnal-ad-type="fishtank"]'),t.length>0&&this.log("Element to replace found by data-hymnal-ad-type: fishtank"))}if(0===t.length&&_.isString(this.type)){var n=this.type.charAt(0).toUpperCase()+this.type.slice(1),i=$('[data-cb-ad-id="'+n+'"],[data-cb-ad-id="Athena"],.ad-interruptor').first();i.length>0&&(t=$("<div>").attr("data-hymnal-ad-id",this.id),i.append(t))}return t=t.length>0?t.first():null},e.prototype.getElement=function(){return this._element},e.prototype.getSlug=function(){if(this.slug)return this.slug;var t=[];return this.brand&&t.push((this.brand||"").toLowerCase().replace(" ","_")),this.id&&t.push(this.id),this.slug=t.join("_"),this.slug},e.prototype.getTestMode=function(){var t=this.settings.window;return t.Hymnal&&t.Hymnal.settings&&t.Hymnal.settings.testMode===!0?!0:this.settings.testMode},e.prototype.setTestMode=function(t){this.settings.testMode=t},e.prototype.engage=function(t){this.log("Engagement: "+t),this.getTestMode()?this.popUp("Engagement: "+t):_.each(this._engagementEventListeners,function(e){_.isFunction(e)&&e(t)})},e.prototype.clickThrough=function(){this.engage("click-through"),this.clickThroughUrl&&(this.getTestMode()?this.popUp("Open URL: "+this.clickThroughUrl):(this.log("Opening URL in new window: "+this.clickThroughUrl),this.settings.window.open(this.clickThroughUrl,"_blank")))},e.prototype.showMetrics=function(){if(!this._baseballCard){var e=this,n=t.util.flip(this.getElement().get(0),""),i=this.settings.window.Hymnal.settings.adminHost;-1!==window.location.host.indexOf("localhost")&&(i="http://localhost:3000");var a=i+"/ads/"+this.id+"/baseball_card";this._baseballCard=$(n);var s=$("<div>").text("show ad").css({position:"absolute",top:"25px",right:"24px",padding:"3px 10px 3px 10px",color:"#666",border:"1px solid #eee","border-radius":"5px",cursor:"pointer","font-family":"Gotham SSm A, Gotham SSm B, Helvetica, Arial","font-size":"12px","line-height":"1.25"});s.click(function(){e.hideMetrics()}),this._baseballCard.css("height","570px").css("min-height","570px"),this._baseballCard.append(s),this._baseballCard.append($("<iframe>").css({width:"100%",height:"550px",border:"none"}).attr("src",a))}},e.prototype.hideMetrics=function(){this._baseballCard.find("iframe").remove(),this._baseballCard.get(0).close(),this._baseballCard=null},e.prototype.toggleMetrics=function(){this._baseballCard?this.hideMetrics():this.showMetrics()},e.prototype._showBaseballCardButton=function(){var t=this.getElement();if(t){var e=t.find(".baseball-card-button");0===e.length?e=$('<div class="baseball-card-button">').text("show metrics").css({position:"absolute",top:"3px",right:"110px",padding:"1px 3px 1px 3px",color:"#fff",border:"1px solid #fff","border-radius":"1px",cursor:"pointer","z-index":"1000"}).appendTo(t):e.show();var n=this;e.click(function(t){n.showMetrics(),t.stopPropagation()})}},e.prototype._triggerLifecycleEvent=function(t){this.log("Lifecycle: "+t);var e=this;_.each(this._lifecycleEventListeners,function(n){n(t,e)})},e.prototype._configureStandardEngagementDetection=function(){var n=this.getElement(),i="scroll."+this.getSlug(),a=this,s=_.once(function(){a.engage("view"),n.addClass(e.cssClasses.viewed)});a.manual_view_impression&&(a.log("Suppressing automatic view setup"),s=function(){}),n&&n.length>0&&(t.util.inViewport(n)?s():$(window).on(i,_.throttle(function(){t.util.inViewport(n)&&(s(),$(window).off(i))},100)))},e}()}(HymnalLib),function(t){t.MetricsInstrumentation||!function(){t.MetricsInstrumentation=function(){function t(t){t=t||{},this._name=t.name,this._adProperties=t.adProperties,this._setupFunction=t.setupFunction,this._engagementEventListener=t.engagementEventListener,this._ad=null}return t.prototype.getName=function(){return this._name},t.prototype.setAd=function(t){var e=this;this._ad=t,_.isObject(this._adProperties)&&_.each(this._adProperties,function(t,n){e._ad.log(e._name+' adding property to Ad; key: "'+n+'", value: "'+t+'"'),e._ad[n]=t}),this._setupFunction&&this._ad.addLifecycleEventListener(function(t,n){"render"===t&&e._setupFunction(n)}),this._engagementEventListener&&this._ad.addEngagementEventListener(this._engagementEventListener)},t}()}()}(HymnalLib),function(t){t.DefaultEvents||!function(){t.DefaultEvents=function(){function t(t){return t=t||{},this._name=t.name,e}var e=function(t,e){$(document).triggerHandler("hymnal:"+t,{ad:e})};return t}()}()}(HymnalLib),function(Hymnal){$(function(){var ad=new Hymnal.Ad({id:"961",slug:"fanduel_fanduel_sb_nation_promo_code_content_link_961",type:"Native Ad",campaign:"fanduel_initial_campaign_80",campaign_name:"Initial Campaign",brand:"FanDuel",design_template:"Native Ad Content Link",html:{"18bcb9f56996aefbc3039cd1898bca40":'<div class=\\"native-ad-content-link\\" id=\\"native-ad-content-link-12443\\"><a class=\\"native-ad-thumbnail\\" href=\\"$AD_SERVER[click_through_url]\\" style=\\"background: url(http://cdn.hymnal.voxmedia.com/uploads/asset/file/4188/trout-miggy-1050.jpg);\\" alt=\\"Win $10,000 with $2 entry in one-night fantasy baseball league\\"><\\/a><div class=\\"native-ad-sponsorship\\"><div class=\\"native-ad-preamble\\" style=\\"background: #000000\\">From Our Sponsor<\\/div><img class=\\"native-ad-logo\\" src=\\"http://cdn.hymnal.voxmedia.com/uploads/asset/file/2657/129884491_423864719_Fanduel_STB_Black.png\\" alt=\\"FanDuel\\"><\\/div><div class=\\"native-ad-info\\"><a class=\\"native-ad-title\\" href=\\"$AD_SERVER[click_through_url]\\">Win $10,000 with $2 entry in one-night fantasy baseball league<\\/a><div class=\\"native-ad-byline\\"><div class=\\"native-ad-powered-by\\">Powered By<\\/div><a class=\\"native-ad-vox-creative\\" data-tooltip-text=\\"\\" data-tooltip-class=\\"native-ad-tooltip\\">FanDuel<\\/a><\\/div><\\/div><div class=\\"native-ad-description\\">Click here to get a 100% deposit bonus on FanDuel<\\/div><blockquote class=\\"native-ad-quote\\">Click here to get a 100% deposit bonus on FanDuel<\\/blockquote><\\/div>'},css:"",fields:{"18bcb9f56996aefbc3039cd1898bca40":{thumbnail:"http://cdn.hymnal.voxmedia.com/uploads/asset/file/4188/trout-miggy-1050.jpg",preamble:"From Our Sponsor",brand_color:"#000000",logo:"http://cdn.hymnal.voxmedia.com/uploads/asset/file/2657/129884491_423864719_Fanduel_STB_Black.png",title:"Win $10,000 with $2 entry in one-night fantasy baseball league",byline:"FanDuel",description:"Click here to get a 100% deposit bonus on FanDuel",pull_quote:"Click here to get a 100% deposit bonus on FanDuel"}},designSetupFunction:function(variant){var all_variants={"18bcb9f56996aefbc3039cd1898bca40":"// TODO\r\n"};eval(all_variants[variant])}});ad.addMetricsInstrumentation(new Hymnal.MetricsInstrumentation({name:"Basic Tracking",adProperties:{clickThroughUrl:"https://www.fanduel.com/sb-nation-basketball?p=SBNATION3"}})),ad.addMetricsInstrumentation(new Hymnal.MetricsInstrumentation({name:"Umbel",setupFunction:function(t){t.log("Setting up Umbel Intelligent Ad..."),window._umbel=window._umbel||[];var e={type:"send",name:"campaign.tag",value:{brand:"FanDuel",campaign:"fanduel_initial_campaign_80",ad:"fanduel_fanduel_sb_nation_promo_code_content_link_961",ad_type:"NativeAd",placement:"NativeAd"}};window.Util&&Util.UserAgentProfiler&&Util.UserAgentProfiler.deviceTypeForOpenX&&(e.value.platform=Util.UserAgentProfiler.deviceTypeForOpenX()),window._umbel.push(e),t.log("Done setting up Umbel Intelligent Ad.")},engagementEventListener:function(t){window._umbel||(ad.log("window._umbel was not previously defined - Umbel may not be configured"),window._umbel=[]),"view"===t?(window._umbel.push({type:"send",name:"campaign.view",value:"fanduel_fanduel_sb_nation_promo_code_content_link_961"}),ad.log("Pushed campaign.view to Umbel")):(window._umbel.push({type:"send",name:"campaign.engagement",value:["fanduel_fanduel_sb_nation_promo_code_content_link_961",t]}),ad.log("Pushed campaign.engagement to Umbel: "+t))}})),ad.addMetricsInstrumentation(new Hymnal.MetricsInstrumentation({name:"Moat",setupFunction:function(t){t.requestMoatJavascript=function(e,n){t.log("Setting up Moat");var i=this.siteID||"vox_media_1";if("undefined"!=typeof e){jQuery(e).attr("data-moat-ad-id",n);var a="http://js.moatads.com/voxmedia4590538913/moatad.js#moatClientLevel1=FanDuel&moatClientLevel2=fanduel_initial_campaign_80&moatClientLevel3=fanduel_fanduel_sb_nation_promo_code_content_link_961&moatClientLevel4=fanduel_fanduel_sb_nation_promo_code_content_link_961&moatClientSlicer1="+i+"&moatClientSlicer2="+this.adUnitID;t.log("Requesting: "+a);var s=document.createElement("SCRIPT");if(s.type="text/javascript",s.charset="UTF-8",s.src=a,/curbed|racked|eater/i.test(location.hostname)){var o=e.parent()[0],l=e.next()[0];o&&l&&"function"==typeof o.insertBefore&&(o.insertBefore(s,l),t.log("inserted Moat js using vanilla js"))}else e.after(s)}},t.manual_moat_setup?(t.log("delaying moat instrumentation"),t.log("Call ad.requestMoatJavascript($element,'Athena') later to set it up")):t.requestMoatJavascript(jQuery(t.getElement()),"Fishtank")}})),ad.addLifecycleEventListener(new Hymnal.DefaultEvents),ad.render()})}(HymnalLib)}(jQuery);